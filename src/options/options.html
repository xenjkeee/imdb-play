<!DOCTYPE html>
<html>
<head>
  <title>imdb-play Settings</title>
  <style>
    body { font-family: sans-serif; padding: 16px; width: 400px; color: #333; }
    h2 { margin-top: 0; font-size: 18px; border-bottom: 2px solid #f5c518; padding-bottom: 8px; }
    
    .provider-list { margin-bottom: 20px; }
    .provider-item { 
      display: flex; 
      align-items: center; 
      background: #f9f9f9; 
      padding: 10px; 
      border-radius: 4px; 
      margin-bottom: 8px; 
      border: 1px solid #ddd;
    }
    .provider-item.default { border-color: #f5c518; background: #fffbe6; }
    
    .provider-info { flex-grow: 1; }
    .provider-name { font-weight: bold; font-size: 14px; }
    .provider-url { font-size: 11px; color: #666; margin-top: 2px; }
    
    .actions { display: flex; gap: 4px; }
    .btn-icon { background: none; border: none; cursor: pointer; padding: 4px; font-size: 16px; opacity: 0.6; }
    .btn-icon:hover { opacity: 1; }
    .btn-icon.delete:hover { color: #d32f2f; }
    
    .radio-default { margin-right: 10px; cursor: pointer; }

    /* Modal / Editor */
    #editor { display: none; background: #fff; border: 1px solid #ddd; padding: 15px; border-radius: 4px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    #editor h3 { margin-top: 0; font-size: 16px; }
    
    label { display: block; margin-top: 10px; font-size: 12px; font-weight: bold; }
    input[type="text"] { width: 100%; padding: 8px; box-sizing: border-box; margin-top: 4px; border: 1px solid #ccc; border-radius: 4px; }
    .help-text { font-size: 10px; color: #888; margin-top: 2px; }

    .main-actions { display: flex; justify-content: space-between; margin-top: 20px; }
    .btn-primary { background-color: #f5c518; border: none; padding: 8px 16px; border-radius: 4px; font-weight: bold; cursor: pointer; }
    .btn-secondary { background-color: #eee; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; }
    
    #status { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 8px 16px; border-radius: 20px; font-size: 12px; display: none; }
  </style>
</head>
<body>
  <h2>Streaming Providers</h2>

  <div id="provider-list" class="provider-list">
    <!-- Rendered via JS -->
  </div>

  <div class="main-actions">
    <button id="btn-add" class="btn-secondary">+ Add Provider</button>
    <button id="btn-save" class="btn-primary">Save Changes</button>
  </div>
  
  <div style="margin-top: 10px; text-align: right;">
      <button id="btn-reset" style="background:none; border:none; color:#888; font-size:11px; cursor:pointer; text-decoration:underline;">Reset to Defaults</button>
  </div>

  <!-- Editor Section (Hidden by default) -->
  <div id="editor-overlay" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.5); z-index:10;">
      <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:20px; width:320px; border-radius:8px;">
        <h3>Edit Provider</h3>
        
        <label>Name</label>
        <input type="text" id="edit-name" placeholder="e.g. VidSrc.to">
        
        <label>Base URL</label>
        <input type="text" id="edit-url" placeholder="https://...">

        <label>Movie Format</label>
        <input type="text" id="edit-movie" value="/embed/movie/{id}">
        <div class="help-text">Use {id} for IMDb ID</div>

        <label>TV Format</label>
        <input type="text" id="edit-tv" value="/embed/tv/{id}/{s}/{e}">
        <div class="help-text">Use {id}, {s}, {e}</div>
        
        <div style="margin-top: 10px;">
            <label style="display:inline-flex; align-items:center; gap:5px;">
                <input type="checkbox" id="edit-enabled"> Show in list
            </label>
        </div>

        <div style="margin-top: 20px; text-align: right; gap: 8px; display: flex; justify-content: flex-end;">
            <button id="btn-cancel-edit" class="btn-secondary">Cancel</button>
            <button id="btn-save-edit" class="btn-primary">Done</button>
        </div>
      </div>
  </div>

  <div id="status">Saved!</div>

  <script src="../utils/providers.js"></script>
  <script src="options.js"></script>
</body>
</html>